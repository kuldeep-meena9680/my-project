<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kuldeep Meena | Portfolio</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../asset/logo/kuldeepmeenalogo.png">

  <!-- Font Awesome - Only one link needed -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family: 'Poppins', sans-serif;
      background:#f5f8fc;
      color:#333;
      line-height:1.6;
    }

    /* Navbar */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0px 50px;
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(12px);
      box-shadow:0 4px 12px rgba(0,0,0,0.08);
      z-index: 1000;
    }
    .navbar .logo img {width:120px; transition:0.3s;}
    .nav-links {
      display: flex;
      align-items: center;
    }
    .nav-links a {
      margin-left: 28px;
      text-decoration:none;
      font-weight:600;
      color: #fdf907;
      transition:0.3s;
      font-size:15px;
      position: relative;
    }
    .nav-links a::after {
      content: "";
      position: absolute;
      width: 0%;
      height: 2px;
      background: dodgerblue;
      bottom: -5px;
      left: 0;
      transition: 0.3s;
    }
    .nav-links a:hover::after {width: 100%;}

    /* Hamburger */
    .hamburger {
      display: none;
      font-size: 26px;
      color: #222;
      cursor: pointer;
    }

    /* Hero */
    .hero {
      min-height: 100vh;
      background: linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.65)), url('/images/background image.jpg') no-repeat center/cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      text-align: center;
      padding: 0 20px;
    }
    .hero h1 {
      font-size: 3.5rem;
      margin-bottom: 15px;
      animation: fadeInDown 1s ease;
    }
    .hero p {
      font-size: 1.3rem;
      margin-bottom: 30px;
      max-width: 650px;
      animation: fadeIn 2s ease;
    }
    .hero .btn {
      padding: 14px 34px;
      border: none;
      border-radius: 40px;
      background: linear-gradient(135deg, dodgerblue, #08f730);
      color: #fff;
      font-weight:600;
      font-size:16px;
      cursor: pointer;
      transition:0.3s;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      text-decoration: none;
      display: inline-block;
    }
    .hero .btn:hover {
      background: linear-gradient(135deg, #08f730, dodgerblue);
      transform: translateY(-3px);
    }

    /* Keyframes */
    @keyframes fadeInDown { from {opacity:0; transform: translateY(-40px);} to {opacity:1; transform: translateY(0);} }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

    /* Slider */
    .slider-container {
      position: relative;
      width: 100%;
      height: 90vh;
      overflow: hidden;
    }
    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .slide.active {opacity: 1;}
    .dots {
      text-align: center;
      margin: 20px 0;
    }
    .dot {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin: 0 6px;
      background: #bbb;
      border-radius: 50%;
      cursor: pointer;
      transition:0.3s;
    }
    .active-dot { background: dodgerblue; }

    /* Services */
    .services {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      padding: 80px 20px;
      background:#fff;
      gap: 30px;
    }
    .service-box {
      flex: 1 1 320px;
      max-width: 340px;
      background: #fff;
      padding: 50px 30px;
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.08);
      text-align: center;
      transition: 0.4s ease;
    }
    .service-box:hover {
      transform: translateY(-12px);
      box-shadow:0 18px 40px rgba(0,0,0,0.15);
    }
    .service-box i {
      font-size: 55px;
      color: dodgerblue;
      margin-bottom: 25px;
      transition:0.3s;
    }
    .service-box:hover i {color:#08f730;}
    .service-box h3 {
      margin-bottom: 18px;
      color:#004aad;
      font-size: 20px;
    }
    .service-box p {color:#555;font-size:15px;}

    /* CSS Variables */
    :root{
      --primary:#0d2b52;
      --accent:#ffcc00;
      --glass-bg: rgba(13,43,82,0.85);
      --muted: rgba(255,255,255,0.85);
    }

    /* PAGE base so you can preview footer on its own */
    html,body{height:100%; margin:0; font-family:'Segoe UI',Arial, sans-serif; background:linear-gradient(180deg,#0b2546 0%, #07122a 100%); color:#fff;}
    main{min-height:70vh; display:flex; align-items:center; justify-content:center; gap:12px; flex-direction:column;}
    h1{color:var(--accent); margin:0 0 6px 0;}

    /* --- FOOTER --- */
    .footer {
      position: relative;
      background: var(--glass-bg);
      backdrop-filter: blur(8px) saturate(120%);
      color: #fff;
      padding: 110px 20px 60px; /* space for waves */
      overflow: hidden;
      border-top: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 10px 40px rgba(3,9,23,0.6) inset;
    }

    /* Animated Waves (CSS-only shapes) */
    .waves {
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 120px;
      pointer-events: none;
      z-index: 3;
      overflow: hidden;
    }
    .wave {
      position: absolute;
      width: 200%;
      height: 160px;
      background: radial-gradient(60% 50% at 10% 50%, rgba(255,255,255,0.06), rgba(255,255,255,0)),
                  linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
      border-radius: 45%;
      transform-origin: center bottom;
      filter: blur(6px);
      animation: waveMove 10s linear infinite;
    }
    .wave#w1{ bottom:-40px; left:0; opacity:0.55; animation-duration:10s; transform:scaleX(1.1) }
    .wave#w2{ bottom:-20px; left:-30%; opacity:0.35; animation-duration:14s; transform:scaleX(1.25) }
    .wave#w3{ bottom:-10px; left:-10%; opacity:0.22; animation-duration:20s; transform:scaleX(1.45) }
    .wave#w4{ bottom:0px; left:-50%; opacity:0.12; animation-duration:26s; transform:scaleX(1.9) }

    @keyframes waveMove {
      0%{ transform: translateX(0) rotate(0deg); }
      100%{ transform: translateX(-50%) rotate(0deg); }
    }

    /* Footer main grid */
    .footer-container{
      max-width:1200px;
      margin: 0 auto;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap:34px;
      position:relative;
      z-index:6;
    }

    .footer-col { padding:6px 4px; }
    .footer-col.about .logo { font-size:28px; margin:0 0 6px 0; display:flex; align-items:center; gap:10px; }
    .logo-emoji{ font-size:20px; transform:translateY(-2px); }

    /* Animated gradient text for logo & names */
    .gradient-text{
      background: linear-gradient(270deg, var(--accent), #ff6b6b, #00e0e0, #a76bff);
      background-size: 800% 800%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientAnim 10s linear infinite;
      font-weight:700;
      letter-spacing:0.2px;
    }
    @keyframes gradientAnim {
      0%{ background-position:0% 50% }
      50%{ background-position:100% 50% }
      100%{ background-position:0% 50% }
    }

    .footer-col p{ color:var(--muted); margin:8px 0 0 0; font-size:14px; line-height:1.7; }
    .footer-col h3{ margin:0 0 10px 0; font-size:16px; color:#fff; position:relative; }
    .footer-col h3::after{ content:''; display:block; width:42px; height:3px; background:var(--accent); margin-top:8px; border-radius:3px; }

    /* Lists */
    .footer-col ul{ list-style:none; padding:0; margin:6px 0 0 0; }
    .footer-col li{ margin:10px 0; font-size:14px; display:flex; align-items:center; gap:10px; color:var(--muted); }
    .footer-col li i{ color:var(--accent); min-width:18px; text-align:center;}

    /* Social icons + bubble hover */
    .social-icons{ margin-top:12px; display:flex; gap:10px; align-items:center; }
    .social-icons a{
      display:inline-grid; place-items:center;
      width:44px;height:44px;border-radius:50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      color:#fff; text-decoration:none; position:relative; overflow:hidden; transition: transform .25s ease, box-shadow .25s ease;
      box-shadow: 0 6px 18px rgba(2,8,20,0.3);
    }
    .social-icons a i{ font-size:16px; }
    .social-icons a:hover{ transform:translateY(-6px) scale(1.06); box-shadow: 0 14px 34px rgba(0,0,0,0.6), 0 0 18px rgba(255,204,0,0.18); color:var(--primary); background:var(--accent); }
    /* bubble pop */
    .social-icons a::after{
      content:''; position:absolute; width:12px; height:12px; background:#fff; border-radius:50%; left:50%; top:120%; transform:translateX(-50%); opacity:0; transition: all .45s cubic-bezier(.2,.9,.3,1);
      filter:blur(.2px);
    }
    .social-icons a:hover::after{ top:-18%; opacity:0.9; transform: translateX(-50%) scale(1.2); }

    /* Newsletter box */
    .newsletter { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); padding:16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); }
    .newsletter p{ margin:0 0 10px 0; color:var(--muted); }
    .newsletter form { display:flex; gap:8px; align-items:center; }
    .newsletter input[type="email"]{
      flex:1; padding:12px 14px; border-radius:999px; border:none; outline:none;
      background: rgba(255,255,255,0.04); color:#fff; font-size:14px; transition: box-shadow .2s;
    }
    .newsletter input[type="email"]::placeholder{ color: rgba(255,255,255,0.55); }
    .newsletter button.subscribe{
      background: linear-gradient(90deg, var(--accent), #ff7b7b); color:var(--primary); padding:10px 16px; border:none; border-radius:999px; cursor:pointer; font-weight:600;
      display:flex; align-items:center; gap:8px; box-shadow: 0 8px 20px rgba(255,204,0,0.12); transition: transform .18s ease, box-shadow .18s ease;
    }
    .newsletter button.subscribe:hover{ transform:translateY(-4px); box-shadow: 0 18px 44px rgba(255,204,0,0.18); }

    /* Footer bottom */
    .footer-bottom{ text-align:center; margin-top:28px; font-size:13px; color:rgba(255,255,255,0.85); position:relative; z-index:6; }

    /* Scroll-to-top button (small glowing circle) */
    .scroll-top{
      position:fixed; right:24px; bottom:24px; z-index:9999; width:50px;height:50px;border-radius:50%; border:none; display:grid; place-items:center; cursor:pointer;
      background: linear-gradient(180deg,var(--accent), #ffd36a); color:var(--primary); font-size:18px; box-shadow: 0 8px 28px rgba(255,204,0,0.18);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .scroll-top:hover{ transform:scale(1.12); box-shadow: 0 18px 48px rgba(255,204,0,0.28); }

    /* toast (success) */
    .toast{
      position:fixed; left:50%; transform:translateX(-50%); bottom:90px; z-index:99999;
      background: linear-gradient(90deg,#00d27a,#28a7ff); color:#fff; padding:12px 18px; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.5); display:flex; gap:10px; align-items:center; font-weight:600;
      opacity:0; pointer-events:none; transition:all .35s;
    }
    .toast.show{ opacity:1; bottom:110px; pointer-events:auto; }

    /* confetti pieces container */
    .confetti-wrapper { position:fixed; left:50%; transform:translateX(-50%); bottom:140px; z-index:99998; pointer-events:none; width:260px; height:120px; overflow:visible; }

    /* responsive */
    @media (max-width:720px){
      .footer{ padding:90px 16px 110px; }
      .waves{ top:-60px; height:90px; }
      .scroll-top{ right:14px; bottom:18px; }
    }

    /* ==================== MEDIA QUERIES ==================== */
    @media (max-width: 1200px) {
      .hero h1 {font-size:3rem;}
      .hero p {font-size:1.2rem;}
      .slider-container {height: 75vh;}
    }

    @media (max-width: 992px) {
      .navbar {padding: 12px 30px;}
      .nav-links a {margin-left: 18px; font-size:14px;}
      .hero h1 {font-size: 2.5rem;}
      .hero p {font-size: 1.1rem;}
    }

    @media (max-width: 768px) {
      .hamburger {display: block;}
      .nav-links {
        flex-direction: column;
        background: rgba(0,0,0,0.95);
        position: absolute;
        top: 65px;
        right: 0;
        width: 220px;
        border-radius: 10px;
        overflow: hidden;
        max-height: 0;
        opacity: 0;
        transition: max-height 0.4s ease, opacity 0.4s ease;
      }
      .nav-links.show {max-height: 320px; opacity: 1;}
      .nav-links a {padding: 14px 0; text-align: center; font-size: 15px; color: #fff; border-bottom: 1px solid rgba(255,255,255,0.1);}
      .nav-links a:last-child {border-bottom: none;}
      .hero h1 {font-size: 2rem;}
      .hero p {font-size: 1rem;}
      .hero .btn {padding: 12px 26px; font-size:14px;}
      .slider-container {height: 60vh;}
      .service-box {max-width: 100%;}
    }

    @media (max-width: 480px) {
      .navbar .logo img {width:100px;}
      .hero h1 {font-size: 1.6rem;}
      .hero p {font-size: 0.9rem;}
      .hero .btn {font-size:13px; padding: 10px 20px;}
      .service-box {padding: 25px 15px;}
      .service-box i {font-size: 40px;}
    }

    @media (max-width: 360px) {
      .hero h1 {font-size: 1.5rem;}
      .hero p {font-size: 0.85rem;}
      .hero .btn {font-size:12px; padding: 8px 18px;}
      .navbar {padding: 8px 15px;}
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <div class="logo"><img src="../asset/logo/kuldeepmeenalogo.png" alt="Logo"></div>
    <i class="fas fa-bars hamburger" onclick="toggleMenu()"></i>
    <div class="nav-links">
      <a href="../src/index.html">Home</a>
      <a href="../src/about.html">About</a>
      <a href="../src/service.html">Services</a>
      <a href="../src/portfolio.html">Portfolio</a>
      <a href="../src/contact.html">Contact</a> <!-- Fixed case sensitivity -->
    </div>
  </div>

  <!-- Hero -->
  <section class="hero">
    <h1>Hi, I'm <span style="color:dodgerblue;">Kuldeep Meena</span></h1>
    <p>A Passionate Web Developer & UI/UX Designer building clean, modern, and user-friendly digital experiences.</p>
    <a href="portfolio.html" class="btn">Explore My Work</a>
  </section>

  <!-- Image Slider -->
  <div class="slider-container">
    <div class="slide active"><img src="../asset/images/slideimage1.jpg" alt="Slide 1"></div>
    <div class="slide"><img src="../asset/images/slideimage2.jpg" alt="Slide 2"></div>
    <div class="slide"><img src="../asset/images/slideimage3.jpg" alt="Slide 3"></div>
  </div>
  <div class="dots">
    <span class="dot active-dot" onclick="currentSlide(0)"></span>
    <span class="dot" onclick="currentSlide(1)"></span>
    <span class="dot" onclick="currentSlide(2)"></span>
  </div>

  <!-- Services -->
  <section class="services">
    <div class="service-box">
      <i class="fas fa-code"></i>
      <h3>Web Development</h3>
      <p>Responsive, fast, and secure websites tailored to your business needs.</p>
    </div>
    <div class="service-box">
      <i class="fas fa-mobile-alt"></i>
      <h3>Mobile Apps</h3>
      <p>Beautiful Android & iOS apps designed to deliver smooth experiences.</p>
    </div>
    <div class="service-box">
      <i class="fas fa-lightbulb"></i>
      <h3>Creative Design</h3>
      <p>Unique UI/UX designs that highlight your brand and attract customers.</p>
    </div>
  </section>

  <!-- ==================== FOOTER ==================== -->
  <footer class="footer" aria-label="Site footer">
    <!-- Waves (top-of-footer wave shapes) -->
    <div class="waves" aria-hidden="true">
      <div class="wave" id="w1"></div>
      <div class="wave" id="w2"></div>
      <div class="wave" id="w3"></div>
      <div class="wave" id="w4"></div>
    </div>

    <div class="footer-container">
      <!-- ABOUT & SOCIAL -->
      <div class="footer-col about" aria-labelledby="footer-about">
        <div class="logo" id="footer-about">
          <span class="logo-emoji">üåê</span>
          <span class="gradient-text">Kuldeep Meena</span> <!-- Fixed spelling -->
        </div>
        <p>Crafting modern, responsive, and high-performance websites. I focus on UI/UX, accessibility and measurable business results.</p>
        <div class="social-icons" aria-label="social links">
          <a href="#" title="Facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" title="Twitter" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
          <a href="#" title="LinkedIn" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
          <a href="#" title="GitHub" aria-label="GitHub"><i class="fab fa-github"></i></a>
        </div>
      </div>

      <!-- QUICK LINKS -->
      <div class="footer-col" aria-labelledby="footer-links">
        <h3 id="footer-links">Quick Links</h3>
        <ul>
          <li><i class="fas fa-angle-right"></i><a href="../src/index.html">Home</a></li>
          <li><i class="fas fa-angle-right"></i><a href="../src/about.html">About</a></li>
          <li><i class="fas fa-angle-right"></i><a href="../src/service.html">Services</a></li>
          <li><i class="fas fa-angle-right"></i><a href="../src/portfolio.html">Portfolio</a></li>
          <li><i class="fas fa-angle-right"></i><a href="../src/contact.html">Contact</a></li>
        </ul>
      </div>

      <!-- SERVICES -->
      <div class="footer-col" aria-labelledby="footer-services">
        <h3 id="footer-services">Services</h3>
        <ul>
          <li><i class="fas fa-code"></i> Web Development</li>
          <li><i class="fas fa-paint-brush"></i> UI/UX Design</li>
          <li><i class="fas fa-briefcase"></i> Consulting</li>
          <li><i class="fas fa-chart-line"></i> SEO & Marketing</li>
        </ul>
      </div>

      <!-- CONTACT + NEWSLETTER -->
      <div class="footer-col" aria-labelledby="footer-contact">
        <h3 id="footer-contact">Contact</h3>
        <ul>
          <li><i class="fas fa-phone"></i> +91 9462591251</li>
          <li><i class="fas fa-envelope"></i> km162613@gmail.com</li>
          <li><i class="fas fa-map-marker-alt"></i> 18, Laxmi Nagar, Jhotwara, Jaipur, Rajasthan</li>
        </ul>

        <div style="height:12px"></div>

        <div class="newsletter" aria-label="Newsletter subscription">
          <p><strong>Get updates</strong> ‚Äî subscribe to my newsletter for tips, offers & short tutorials.</p>
          <form id="newsletterForm" novalidate>
            <input id="newsletterEmail" name="email" type="email" placeholder="Enter your email" aria-label="Email address" required>
            <button class="subscribe" type="submit" aria-label="Subscribe"><i class="fas fa-paper-plane"></i> Subscribe</button>
          </form>
        </div>
      </div>
    </div>

    <div class="footer-bottom" role="contentinfo">
      <p>¬© 2025 <span class="gradient-text">Kuldeep Meena</span>. All Rights Reserved. ‚Ä¢ Designed with ‚ù§Ô∏è</p> <!-- Fixed spelling -->
    </div>
  </footer>

  <!-- Scroll to top -->
  <button class="scroll-top" id="scrollTopBtn" title="Back to top" aria-label="Scroll to top"><i class="fas fa-chevron-up"></i></button>

  <!-- Toast + confetti container -->
  <div class="toast" id="toast" role="status" aria-live="polite"><i class="fas fa-check-circle"></i><span id="toastText">Subscribed!</span></div>
  <div class="confetti-wrapper" id="confetti"></div>

  <!-- JS -->
  <script>
    /* ---------------------------
       Image Slider Functionality
       --------------------------- */
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.dot');

    function showSlide(n) {
      slides.forEach(slide => slide.classList.remove('active'));
      dots.forEach(dot => dot.classList.remove('active-dot'));
      
      currentSlideIndex = n;
      if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
      if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;
      
      slides[currentSlideIndex].classList.add('active');
      dots[currentSlideIndex].classList.add('active-dot');
    }

    function currentSlide(n) {
      showSlide(n);
    }

    // Auto slide every 5 seconds
    setInterval(() => {
      showSlide(currentSlideIndex + 1);
    }, 5000);

    /* ---------------------------
       Hamburger Menu Toggle
       --------------------------- */
    function toggleMenu() {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('show');
    }

    /* ---------------------------
       Scroll-to-top button logic
       --------------------------- */
    const scrollBtn = document.getElementById('scrollTopBtn');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) scrollBtn.style.display = 'grid';
      else scrollBtn.style.display = 'none';
    });
    scrollBtn.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));
    // initial hide
    scrollBtn.style.display = 'none';

    /* ---------------------------
       Newsletter form handling
       - validate email
       - save to localStorage (demo)
       - show toast + confetti
       --------------------------- */
    const form = document.getElementById('newsletterForm');
    const emailInput = document.getElementById('newsletterEmail');
    const toast = document.getElementById('toast');
    const toastText = document.getElementById('toastText');
    const confettiWrap = document.getElementById('confetti');

    // simple email regex (good enough for client-side)
    function validEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function showToast(message = 'Subscribed!') {
      toastText.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3600);
    }

    function spawnConfetti(duration = 1600, count = 22){
      confettiWrap.innerHTML = '';
      const colors = ['#FFCC00', '#FF6B6B', '#00E0E0', '#A76BFF', '#FFFFFF'];
      for(let i=0;i<count;i++){
        const el = document.createElement('span');
        el.style.position = 'absolute';
        el.style.left = (50 + (Math.random()*100 - 50)) + '%';
        el.style.bottom = '0px';
        el.style.width = (6 + Math.random()*10) + 'px';
        el.style.height = el.style.width;
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.borderRadius = (Math.random()>0.5? '50%':'2px');
        el.style.opacity = 0.95;
        el.style.transform = 'translateY(0) rotate('+ (Math.random()*360) +'deg)';
        el.style.pointerEvents = 'none';
        el.style.zIndex = 99999;
        el.style.transition = 'transform ' + (0.9 + Math.random()*0.9) + 's cubic-bezier(.2,.8,.3,1), opacity 0.9s';
        confettiWrap.appendChild(el);
        // animate (random angle & distance)
        setTimeout(()=> {
          const dx = (Math.random()*160) - 80;
          const dy = - (120 + Math.random()*160);
          const rot = (Math.random()*720 - 360);
          el.style.transform = 'translate(' + dx + 'px,' + dy + 'px) rotate(' + rot + 'deg)';
          el.style.opacity = 0;
        }, 20 + Math.random()*120);
      }
      // cleanup
      setTimeout(()=> confettiWrap.innerHTML = '', duration + 800);
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = emailInput.value.trim();
      if(!validEmail(email)){
        showToast('Please enter a valid email');
        return;
      }

      // Save to localStorage (demo) as array of subs
      try {
        const key = 'km_newsletter_list_v1';
        const existing = JSON.parse(localStorage.getItem(key) || '[]');
        // avoid duplicates
        if(!existing.includes(email)){
          existing.push(email);
          localStorage.setItem(key, JSON.stringify(existing));
        }
      } catch(err){
        // ignore storage error
      }

      // success UX
      showToast('Thanks! You are subscribed ‚ú®');
      spawnConfetti(1800, 20);

      // micro-interaction on button
      const btn = form.querySelector('button');
      btn.disabled = true;
      btn.style.transform = 'translateY(-4px) scale(.98)';
      setTimeout(()=> { btn.disabled=false; btn.style.transform=''; }, 1200);

      emailInput.value = '';
    });

    /* Optional: enter key triggers (already default), focus styles */
    emailInput.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter') form.dispatchEvent(new Event('submit', {cancelable:true, bubbles:true}));
    });

    /* Accessibility: reduce motion if user prefers reduced motion */
    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    if(mq && mq.matches){
      document.querySelectorAll('*').forEach(el => el.style.transition = 'none');
    }

    /* Small progressive enhancement: reveal scroll button gently after DOM loaded */
    window.addEventListener('load', () => {
      setTimeout(()=> {
        if(window.scrollY > 200) scrollBtn.style.display='grid';
      }, 700);
    });
  </script>
</body>
</html>